{
    "requiresCompatibilities": [
        "FARGATE"
    ], 
    "networkMode": "awsvpc", 
    "family": "feed-service-tasks", 
    "cpu": "4096", 
    "executionRoleArn": "arn:aws:iam::064106913348:role/FeedAdmin",
    "memory": "8192", 
    "containerDefinitions": [
        {
            "image": "postgresql:latest",
            "name": "database",
            "portMappings": [
                {
                    "protocol": "tcp", 
                    "containerPort": 5432, 
                    "hostPort": 5432
                }
            ], 
            "environment": [
                {
                    "name": "POSTGRES_DB", 
                    "value": "feeds"
                }, 
                {
                    "name": "POSTGRES_PASSWORD", 
                    "value": "feeds"
                }, 
                {
                    "name": "POSTGRES_USER", 
                    "value": "feeds"
                }
            ], 
            "cpu": 0, 
            "memory": 512

        }, 
        {
            "environment": [
                {
                    "name": "ALLOW_PLAINTEXT_LISTENER", 
                    "value": "yes"
                }, 
                {
                    "name": "KAFKA_ADVERTISED_LISTENERS", 
                    "value": "PLAINTEXT://kafka:9092,PLAINTEXT_HOST://localhost:29092"
                }, 
                {
                    "name": "KAFKA_CREATE_TOPICS", 
                    "value": "\"donedeal-results;donedeal-items;pistonheads-items;pistonheads-results;worker-queue\""
                }, 
                {
                    "name": "KAFKA_LISTENER_SECURITY_PROTOCOL_MAP", 
                    "value": "PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT"
                }, 
                {
                    "name": "KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR", 
                    "value": "1"
                }, 
                {
                    "name": "KAFKA_ZOOKEEPER_CONNECT", 
                    "value": "zookeeper:2181"
                }
            ], 
            "name": "kafka", 
            "image": "confluentinc/cp-kafka:latest", 
            "memory": 512, 
            "portMappings": [
                {
                    "protocol": "tcp", 
                    "containerPort": 9092, 
                    "hostPort": 9092
                }, 
                {
                    "protocol": "tcp", 
                    "containerPort": 29092, 
                    "hostPort": 29092
                }
            ], 
            "cpu": 0
        }, 
        {
            "image": "mongo:latest",
            "environment": [
                {
                    "name": "MONGO_INITDB_ROOT_PASSWORD", 
                    "value": "root"
                }, 
                {
                    "name": "MONGO_INITDB_ROOT_USERNAME", 
                    "value": "root"
                }
            ], 
            "name": "mongo", 
            "cpu": 0, 
            "portMappings": [
                {
                    "protocol": "tcp", 
                    "containerPort": 27017, 
                    "hostPort": 27017
                }
            ], 
            "command": [
                "mongod"
            ], 
            "memory": 512, 
            "essential": true
        }, 
        {
            "environment": [
                {
                    "name": "ME_CONFIG_MONGODB_ADMINPASSWORD", 
                    "value": "root"
                }, 
                {
                    "name": "ME_CONFIG_MONGODB_ADMINUSERNAME", 
                    "value": "root"
                }
            ], 
            "name": "mongo-express", 
            "image": "mongo-express", 
            "portMappings": [
                {
                    "protocol": "tcp", 
                    "containerPort": 8081, 
                    "hostPort": 8081
                }
            ], 
            "memory": 512, 
            "cpu": 0
        }, 
        {
            "environment": [
                {
                    "name": "ALLOW_ANONYMOUS_LOGIN", 
                    "value": "yes"
                }, 
                {
                    "name": "ZOOKEEPER_CLIENT_PORT", 
                    "value": "2181"
                }, 
                {
                    "name": "ZOOKEEPER_TICK_TIME", 
                    "value": "2000"
                }
            ], 
            "name": "zookeeper", 
            "image": "confluentinc/cp-zookeeper:latest", 
            "portMappings": [
                {
                    "protocol": "tcp", 
                    "containerPort": 2181, 
                    "hostPort": 2181
                }
            ], 
            "memory": 512, 
            "cpu": 0
        }
    ]
}
